webpackJsonp([1],{0:function(e,t){},GcaT:function(e,t){},N4XD:function(e,t){},twH3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("GcaT"),n("N4XD");var o=n("aozt"),a=n.n(o),i=(n("c4pz"),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"toast",value:function(e){if(!document.querySelector(".toast")){var t=document.createElement("div");t.className="toast",t.innerHTML=e;var n="";e.length>10&&(n="min-width:60%"),t.style.cssText="padding:10px 15px;background:rgba(0,0,0,.7);color:#fff;text-align:center;position:fixed;z-index:99999;top:50%;left:50%;transform:translate(-50%,-50%);max-widh:90%;border-radius:5px;font-size:14px;"+n,document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},2e3)}}},{key:"getUrlParam",value:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null}},{key:"getSomeDate",value:function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t)}},{key:"dateFormat",value:function(e){var t="";return(t=e?new Date(e):new date).getFullYear()+"/"+(t.getMonth()+1>10?t.getMonth()+1:"0"+t.getMonth()+1)+"/"+(t.getDate()>10?t.getDate():"0"+t.getDate())+" "+(t.getHours()>0?t.getHours():"0"+t.getHours())+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())+":"+(t.getSeconds()>10?t.getSeconds():"0"+t.getSeconds())}},{key:"replacePhone",value:function(e){return(e=e.toString()).replace(/^(\d{3})\d{4}(\d+)/,"$1****$2")}},{key:"isIos",value:function(){return navigator.userAgent.match(/(iPad|iPhone)/)}},{key:"isAndroid",value:function(){return navigator.userAgent.match(/(Android)/)}},{key:"isWeixin",value:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},{key:"isApp",value:function(){return navigator.userAgent.match(/(WDBrowser)/gi)}},{key:"pushUrl",value:function(e){if(this.isIos())console.log(e),window.webkit.messageHandlers.pushUrl.postMessage({url:e});else if(this.isAndroid()){var t=JSON.stringify({url:e});window.InviteJs.pushUrl(t)}}}]),e}()),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();a.a.defaults.baseURL="https://carta.caimiaowanka.com";var c={url:"",method:"get",baseURL:"http://dev.wdjzt88.com",headers:{"Content-Type":"application/json;charset=UTF-8"},data:{body:{content:{},head:{OSVersion:"A7.1.1",appVersion:"10.0.6",channel:"sqtes",clientModel:"h5",device_type:"h5",packageName:"com.caimiao.wanka",uuid:"87E8C1AA-D643-4266-B308-DA348EC9F591"}},key:"b5a627b993e7b9f66381b6ce5abc7b82"}};function u(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}a.a.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),a.a.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)});var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,[{key:"get",value:function(e,t){return new Promise(function(n,o){a.a.get(e,{params:t}).then(function(e){n(e.data)}).catch(function(e){o(e)})})}},{key:"post",value:function(e,t){return new Promise(function(n,o){a.a.post(e,{params:t}).then(function(e){n(e)}).catch(function(e){o(e)})})}},{key:"postData",value:function(e,t){return c.url=e,c.data.body.content=t,c.method="post",new Promise(function(e,t){a()(c).then(function(n){if(n)return n&&500==n.data.code?(t(n),void r.toast(n.data.msg)):void e({responseData:n.data.body.content,statusCode:n.data.body.statusCode});r.toast("请检查网络")}).catch(function(e){r.toast("网络错误"),console.log(e),t(e)})})}},{key:"loadData",value:function(e,t,n){var o={reqData:t,url:e,callback:n};if(r.isIos())u(function(e){e.callHandler("LOAD_DATA",o)});else if(r.isAndroid()){var a=JSON.stringify(o.reqData);window.InviteJs.loadData(o.url,a,o.callback)}}},{key:"shareData",value:function(e){r.isIos()?u(function(t){t.callHandler("SHARE_ACTION",e)}):r.isAndroid()&&window.InviteJs.share(e.shareTitle,e.shareContent,e.shareImageUrl,e.miniProgramPath,e.shareUrl,e.callback)}}]),e}()),d="http://a.app.qq.com/o/simple.jsp?pkgname=com.qian.xiao.er",h="qianxiaoer://launch";var f={open:function(){window.location.href=h,setTimeout(function(){window.location.href=d},1e3)},download:function(){window.location.href=d}},m={pushUrl:function(e){switch(e){case"交通银行":this.getUrl("/bankInfo?id=28&name=交通银行");break;case"民生银行":this.getUrl("/bankInfo?id=32&name=民生银行");break;case"上海银行":this.getUrl("/creditCardInfo?id=10021&name=上海银行标准卡金卡");break;case"招商银行":this.getUrl("/creditCardInfo?id=10024&name=招商YOUNG卡青年版");break;case"浦发银行":r.toast("敬请期待");break;case"光大银行":this.getUrl("/creditCardInfo?id=10018&name=光大凯撒旅游白金卡");break;case"兴业银行":this.getUrl("/bankInfo?id=34&name=兴业银行")}},getUrl:function(e){r.isApp()?r.pushUrl("/common/webView/&url="+encodeURIComponent("https://h5.caimiaowanka.com"+e)):location.href="https://h5.caimiaowanka.com"+e}};function g(e){var t=$("#phone"),n=$("#imgCode"),o=$("#smsCode");if("phone"==e)return t.val()?/1\d{10}/g.test(t.val())?($("#phoneErr").hide(),!0):($("#phoneErr").text("请输入正确的手机号码").show(),!1):($("#phoneErr").text("请输入手机号码").show(),!1);if("imgCode"==e){if(n.val()&&$("#imgErr").text("请输入图形验证码").show(),/^\d{4}$/.test(n.val()))return $("#imgErr").hide(),!0;$("#imgErr").text("请输入4位数字的图形验证码").show()}else if("smsCode"==e){if(o.val()||$("#smsErr").text("请输入短信验证码").show(),/^\d{4}$/.test(o.val()))return $("#smsErr").hide(),!0;$("#smsErr").text("请输入4位数字短信验证码").show()}else if("check"==e){if(!$("#check").hasClass("check"))return!0;r.toast("请勾选用户协议")}}$(".close").click(function(){$(".reg-toast").hide()}),$(".reg-toast").click(function(){$(this).hide()}),$(".toast-box .box").click(function(e){e.stopPropagation()}),$("#check").click(function(){$(this).toggleClass("check")}),$(".reg-btn").click(function(){m.pushUrl($(this).siblings("h2").text())}),$(".reg-button").click(function(){if(r.isApp()){if(r.isIos())window.webkit.messageHandlers.pushUrl.postMessage({url:"/"});else if(r.isAndroid()){var e=JSON.stringify({url:"/rebate"});window.InviteJs.pushUrl(e)}}else $(".reg-toast").show()}),$(".has-account").click(function(){f.download()}),$("#img").click(function(){g("phone")&&l.get("/app/imagecode/index3",{phone:$("#phone").val()}).then(function(e){var t='<img src="'+e+'" >';$("#img").html(t)})}),$("#sms").click(function(){var e=this;g("phone")&&g("imgCode")&&l.get("/app/Captcha/web",{phone:$("#phone").val(),type:1,imgcode:$("#imgCode").val()}).then(function(t){r.toast(t.msg),"error"!=t.code&&"ok"==t.code&&($(e).hide(),function(e){$("#counter").text(e+"s").show();var t=setInterval(function(){e--,$("#counter").text(e+"s"),e<=0&&(clearInterval(t),$("#counter").hide(),$("#sms").text("重新获取").show())},1e3)}(60))})}),$("#register").click(function(){g("phone")&&g("imgCode")&&g("smsCode")&&g("check")&&l.get("/app/user/h5register",{phone:$("#phone").val(),msgcode:$("#smsCode").val(),channel:r.getUrlParam("channel"),invite_uid:r.getUrlParam("invite_uid")}).then(function(e){console.log(e),r.toast(e.msg),"error"!=e.code&&"ok"==e.code&&($(".reg-toast").hide(),setTimeout(function(){f.download()},1e3))})})}},["twH3"]);
//# sourceMappingURL=main.0b621b9416384c6ad686.js.map