webpackJsonp([5],{"7QCe":function(t,e){},gIpe:function(t,e){},vdVF:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("4YfN"),i=o.n(a),n=o("9rMa"),c={validatePhoneNumber:function(t){if(!t||""===t)return"请输入手机号码";return/^1\d{10}$/.test(t)?"":"请输入正确的手机号码"}},s=c,r={name:"HomeNav",data:function(){return{codeImgSrc:"",captchaVal:""}},props:{phoneNumber:{type:String},captcha:{type:String}},computed:i()({},Object(n.e)({captchaShow:function(t){return t.loginInfo.captchaShow}})),watch:{captchaVal:function(t,e){this.$emit("update:captcha",t)}},methods:i()({},Object(n.d)(["SETCAPTCHASHOW"]),{getImgCode:function(t){var e=this;this.$http.getImageCode(t).then(function(t){e.codeImgSrc=t})},refreshCode:function(){this.getImgCode(this.phoneNumber)},getCaptcha:function(){var t=s.validatePhoneNumber(this.phoneNumber);""===t?(this.getImgCode(this.phoneNumber),this.SETCAPTCHASHOW({captchaShow:!0})):this.$toast(t)}})},h=o("QAAC");var l=function(t){o("7QCe")},u=Object(h.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mt-field",{staticClass:"imgCaptcha",attrs:{placeholder:"请输入图形验证码",type:"number"},model:{value:t.captchaVal,callback:function(e){t.captchaVal=e},expression:"captchaVal"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.captchaShow,expression:"!captchaShow"}],staticClass:"get-captcha",on:{click:t.getCaptcha}},[o("span",[t._v("获取图形验证码")])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.captchaShow,expression:"captchaShow"}],on:{click:t.refreshCode}},[o("img",{staticClass:"captcha-img",attrs:{alt:"单击图片刷新",src:t.codeImgSrc}})])])},[],!1,l,"data-v-7c29c15c",null).exports,m={name:"HomeNav",data:function(){return{codeLabel:"获取短信验证码",count:"",verificationVal:""}},props:{phoneNumber:{type:String},captcha:{type:String},verification:{type:String}},computed:i()({},Object(n.e)({sendShow:function(t){return t.loginInfo.sendShow},btnDisable:function(t){return t.loginInfo.btnDisable}})),mounted:function(){var t=this;setTimeout(function(){t.verificationVal=""},200)},watch:{verificationVal:function(t,e){this.$emit("update:verification",t)}},methods:i()({},Object(n.d)(["SETSENDSHOW","SETBTNDISABLE"]),{getMsgCode:function(t,e){var o=this;this.$http.getMsgCode(t,e).then(function(t){if(console.log(t),"ok"===t.code){o.SETBTNDISABLE({btnDisable:!0}),o.timer||(o.count=60,o.SETSENDSHOW({sendShow:!1}),o.timer=setInterval(function(){o.count>0&&o.count<=60?o.count--:(o.SETSENDSHOW({sendShow:!0}),clearInterval(o.timer),o.codeLabel="重新发送",o.SETBTNDISABLE({btnDisable:!1}),o.timer=null)},1e3))}else o.$toast(t.msg)})},getCode:function(){var t=s.validatePhoneNumber(this.phoneNumber);""===t?""===this.captcha?this.$toast("请输入图片验证码"):this.getMsgCode(this.phoneNumber,this.captcha):this.$toast(t)}})};var f=function(t){o("wZQq")},p={name:"login",components:{FormCaptcha:u,FormVerification:Object(h.a)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mt-field",{staticClass:"msgCaptcha",attrs:{placeholder:"请输入短信验证码",type:"number"},model:{value:t.verificationVal,callback:function(e){t.verificationVal=e},expression:"verificationVal"}},[o("div",{staticClass:"get-captcha",attrs:{disabled:t.btnDisable},on:{click:t.getCode}},[o("span",{directives:[{name:"show",rawName:"v-show",value:t.sendShow,expression:"sendShow"}]},[t._v(t._s(t.codeLabel))]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!t.sendShow,expression:"!sendShow"}]},[t._v(t._s(t.count)+"s")])])])},[],!1,f,"data-v-42ea7226",null).exports},data:function(){return{title:"手机号快捷登录",rightTitle:"密码登录",quickVisable:!0,options:[{label:" ",value:!0}],code:"",form:{phoneNumber:localStorage.getItem("caiPhone"),captcha:"",verification:"",agreeValue:[!0]}}},computed:i()({},Object(n.e)({loginThirdType:function(t){return t.accountInfo.loginThirdType},thirdType:function(t){return t.accountInfo.thirdType},tempToken:function(t){return t.accountInfo.tempToken}})),created:function(){this.$route.query.code&&(this.code=this.$route.query.code),this.SETLOGINVALUE({captchaShow:!1,sendShow:!0,btnDisable:!1})},mounted:function(){},methods:i()({},Object(n.b)(["getUserInfo"]),Object(n.d)(["SETLOGINVALUE","SETLOGINSTATE"]),{changePanel:function(){this.quickVisable=!this.quickVisable,this.quickVisable?(this.title="手机号快捷登录",this.rightTitle="密码登录"):(this.title="密码登录",this.rightTitle="快捷登录")},toLogin:function(t){var e=this;this.$http.toLogin(t).then(function(t){if(t){e.SETLOGINSTATE({loginState:!0}),e.getUserInfo();var o=e.$route.query.redirected;o?setTimeout(function(){e.$router.push({path:o})},300):e.$router.go(-1)}}).catch(function(t){console.log(t)})},checkForm:function(t){localStorage.setItem("caiPhone",this.form.phoneNumber||"");var e=s.validatePhoneNumber(this.form.phoneNumber);if(""===e)if(this.form.captcha)if(this.form.verification)if(0===this.form.agreeValue.length)this.$toast("请同意财喵万卡注册服务协议");else{var o={phone:this.form.phoneNumber,captcha_code:this.form.verification,img_code:this.form.captcha,type:4};this.toLogin(o)}else this.$toast("短信验证码不能为空");else this.$toast("图形验证码不能为空");else this.$toast(e);t.preventDefault()},showAgreement:function(){this.$router.push("/user/agreement")}})};var d=function(t){o("gIpe")},v=Object(h.a)(p,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[t._v("\n  "+t._s(t.code)+"\n  "),o("mt-header",{staticClass:"boder-header",attrs:{title:t.title}},[o("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){t.$router.go(-1)}},slot:"left"})],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.quickVisable,expression:"quickVisable"}],staticClass:"login-quick"},[o("form",{staticClass:"login-form",attrs:{action:""},on:{submit:t.checkForm},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[o("mt-field",{staticClass:"phone",attrs:{placeholder:"请输入手机号码",type:"tel"},model:{value:t.form.phoneNumber,callback:function(e){t.$set(t.form,"phoneNumber",e)},expression:"form.phoneNumber"}}),t._v(" "),o("form-captcha",{attrs:{phoneNumber:t.form.phoneNumber,captcha:t.form.captcha},on:{"update:captcha":function(e){t.$set(t.form,"captcha",e)}}}),t._v(" "),o("form-verification",{attrs:{phoneNumber:t.form.phoneNumber,captcha:t.form.captcha,verification:t.form.verification},on:{"update:verification":function(e){t.$set(t.form,"verification",e)}}}),t._v(" "),o("div",{staticClass:"mint-cell-wrapper btn-module"},[o("div",{staticClass:"btn-margin"},[o("mt-button",{staticClass:"common-btn"},[t._v("登录")])],1),t._v(" "),o("div",{staticClass:"login-checkbox"},[o("mt-checklist",{attrs:{options:t.options},model:{value:t.form.agreeValue,callback:function(e){t.$set(t.form,"agreeValue",e)},expression:"form.agreeValue"}}),t._v(" "),o("span",[t._v("注册即表示阅读并同意《"),o("a",{on:{click:t.showAgreement}},[t._v(" 财喵万卡注册服务协议")]),t._v("》")])],1)])],1)])],1)},[],!1,d,null,null);e.default=v.exports},wZQq:function(t,e){}});
//# sourceMappingURL=5.18faf073c189ce6eefe3.js.map