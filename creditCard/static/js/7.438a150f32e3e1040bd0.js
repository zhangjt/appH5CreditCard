webpackJsonp([7],{"1klg":function(t,e){},"6CMQ":function(t,e){},KtMa:function(t,e,a){"use strict";var o=a("Dd8w"),i=a.n(o),n=a("NYxO"),s=a("7pK0"),r={name:"HomeNav",data:function(){return{codeLabel:"获取短信验证码",count:"",verificationVal:""}},props:{phoneNumber:{type:String},captcha:{type:String},verification:{type:String}},computed:i()({},Object(n.d)({sendShow:function(t){return t.loginInfo.sendShow},btnDisable:function(t){return t.loginInfo.btnDisable}})),mounted:function(){var t=this;setTimeout(function(){t.verificationVal=""},200)},watch:{verificationVal:function(t,e){this.$emit("update:verification",t)}},methods:i()({},Object(n.c)(["SETSENDSHOW","SETBTNDISABLE"]),{getMsgCode:function(t,e){var a=this;this.$http.getMsgCode(t,e).then(function(t){a.SETBTNDISABLE({btnDisable:!0}),a.timer||(a.count=60,a.SETSENDSHOW({sendShow:!1}),a.timer=setInterval(function(){a.count>0&&a.count<=60?a.count--:(a.SETSENDSHOW({sendShow:!0}),clearInterval(a.timer),a.codeLabel="重新发送",a.SETBTNDISABLE({btnDisable:!1}),a.timer=null)},1e3)),t.statusMsg&&a.$toast(t.statusMsg)})},getCode:function(){var t=s.a.validatePhoneNumber(this.phoneNumber);""===t?""===this.captcha?this.$toast("请输入图片验证码"):this.getMsgCode(this.phoneNumber,this.captcha):this.$toast(t)}})},c=a("XyMi");var h=function(t){a("zBJ0")},f=Object(c.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mt-field",{staticClass:"msgCaptcha",attrs:{placeholder:"请输入短信验证码",type:"number"},model:{value:t.verificationVal,callback:function(e){t.verificationVal=e},expression:"verificationVal"}},[a("div",{staticClass:"get-captcha",attrs:{disabled:t.btnDisable},on:{click:t.getCode}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.sendShow,expression:"sendShow"}]},[t._v(t._s(t.codeLabel))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.sendShow,expression:"!sendShow"}]},[t._v(t._s(t.count)+"s")])])])},[],!1,h,"data-v-2e1e5da8",null);e.a=f.exports},Oijq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),i=a.n(o),n=a("NYxO"),s=a("L6bb"),r=a.n(s),c=a("idbw"),h=a("KtMa"),f=a("7pK0"),l={name:"login",components:{FormCaptcha:c.a,FormVerification:h.a},computed:{btnDisabled:{get:function(){return!this.forgetform.phoneNumber}}},data:function(){return{title:"密码修改",forgetform:{phoneNumber:localStorage.getItem("caiPhone"),captcha:"",verification:"",password:""},isFromMineSetting:!1}},created:function(){this.SETLOGINVALUE({captchaShow:!1,sendShow:!0,btnDisable:!1}),this.isFromMineSetting=this.$route.query.isFromMineSetting},mounted:function(){var t=this;setTimeout(function(){t.forgetform.password=""},200)},methods:i()({},Object(n.c)(["SETLOGINVALUE"]),{changePwd:function(t){var e=this;this.$http.resetPassword(t).then(function(t){t&&0==t.statusCode?(e.$toast("密码修改成功"),localStorage.removeItem("session_id"),e.$router.replace("/user/login")):t.statusMsg&&e.$toast(t.statusMsg)})},checkForm:function(t){localStorage.setItem("caiPhone",this.forgetform.phoneNumber||"");var e=f.a.validatePhoneNumber(this.forgetform.phoneNumber);if(""===e)if(this.forgetform.captcha)if(this.forgetform.verification)if(this.forgetform.password)if(this.forgetform.password.length<6||this.forgetform.password.length>16)this.$toast("登录密码应设置为6-16位字符");else{var a={phone:this.forgetform.phoneNumber,password:r()(this.forgetform.password),img_code:this.forgetform.captcha,captcha_code:this.forgetform.verification};this.changePwd(a)}else this.$toast("密码不能为空");else this.$toast("短信验证码不能为空");else this.$toast("图形验证码不能为空");else this.$toast(e);t.preventDefault()}})},m=a("XyMi");var u=function(t){a("6CMQ")},p=Object(m.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("mt-header",{staticClass:"boder-header",attrs:{title:t.title}},[a("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){t.$router.go(-1)}},slot:"left"})],1),t._v(" "),t._m(0),t._v(" "),a("form",{staticClass:"forget",attrs:{action:""},on:{submit:t.checkForm},model:{value:t.forgetform,callback:function(e){t.forgetform=e},expression:"forgetform"}},[a("mt-field",{attrs:{placeholder:"请输入手机号码",type:"tel"},model:{value:t.forgetform.phoneNumber,callback:function(e){t.$set(t.forgetform,"phoneNumber",e)},expression:"forgetform.phoneNumber"}}),t._v(" "),a("form-captcha",{attrs:{phoneNumber:t.forgetform.phoneNumber,captcha:t.forgetform.captcha},on:{"update:captcha":function(e){t.$set(t.forgetform,"captcha",e)}}}),t._v(" "),a("form-verification",{attrs:{phoneNumber:t.forgetform.phoneNumber,captcha:t.forgetform.captcha,verification:t.forgetform.verification},on:{"update:verification":function(e){t.$set(t.forgetform,"verification",e)}}}),t._v(" "),a("mt-field",{attrs:{placeholder:"请设置登录密码，6-16位字符",type:"password"},model:{value:t.forgetform.password,callback:function(e){t.$set(t.forgetform,"password",e)},expression:"forgetform.password"}}),t._v(" "),a("div",{staticClass:"btn-module"},[a("div",{staticClass:"btn-margin"},[a("mt-button",{staticClass:"common-btn blue",attrs:{disabled:t.btnDisabled}},[t._v("提交")])],1)])],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("form",{staticStyle:{display:"none"}},[e("input",{attrs:{type:"password"}})])}],!1,u,"data-v-dd63f0c4",null);e.default=p.exports},idbw:function(t,e,a){"use strict";var o=a("Dd8w"),i=a.n(o),n=a("NYxO"),s=a("7pK0"),r={name:"HomeNav",data:function(){return{codeImgSrc:"",captchaVal:""}},props:{phoneNumber:{type:String},captcha:{type:String}},computed:i()({},Object(n.d)({captchaShow:function(t){return t.loginInfo.captchaShow}})),watch:{captchaVal:function(t,e){this.$emit("update:captcha",t)}},methods:i()({},Object(n.c)(["SETCAPTCHASHOW"]),{getImgCode:function(t){var e=this;this.$http.getImageCode(t).then(function(t){t.image&&(e.codeImgSrc="data:image/png;base64,"+t.image)})},refreshCode:function(){this.getImgCode(this.phoneNumber)},getCaptcha:function(){var t=s.a.validatePhoneNumber(this.phoneNumber);""===t?(this.getImgCode(this.phoneNumber),this.SETCAPTCHASHOW({captchaShow:!0})):this.$toast(t)}})},c=a("XyMi");var h=function(t){a("1klg")},f=Object(c.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mt-field",{staticClass:"imgCaptcha",attrs:{placeholder:"请输入图形验证码",type:"number"},model:{value:t.captchaVal,callback:function(e){t.captchaVal=e},expression:"captchaVal"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.captchaShow,expression:"!captchaShow"}],staticClass:"get-captcha",on:{click:t.getCaptcha}},[a("span",[t._v("获取图形验证码")])]),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.captchaShow,expression:"captchaShow"}],staticClass:"captcha-img",attrs:{alt:"单击图片刷新",src:t.codeImgSrc},on:{click:t.refreshCode}})])},[],!1,h,"data-v-7117ecb4",null);e.a=f.exports},zBJ0:function(t,e){}});
//# sourceMappingURL=7.438a150f32e3e1040bd0.js.map